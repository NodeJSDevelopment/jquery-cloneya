!function(e){var n=function(n,t){var o=/^(.*)(\d)+$/i,l=e(n),i={limit:999,cloneThis:".toclone",valueClone:!1,dataClone:!1,deepClone:!1,cloneButton:".clone",deleteButton:".delete",clonePosition:"after",serializeID:!0},c=e.extend(i,t||{});this.getOption=function(){return c},this.setOption=function(n){e.extend(c,n||{})},l.find(c.cloneButton).length&&l.on("click",c.cloneButton,function(n){n.preventDefault(),l.triggerHandler("clone_clone",[e(this)])}),l.on("clone_clone",function(n,t){var o=l.find(c.cloneThis).length;o<c.limit?($toclone=t.closest(c.cloneThis),l.triggerHandler("clone_before_clone",[$toclone]),$newclone=$toclone.clone({withDataAndEvents:c.dataClone,deepWithDataAndEvents:c.deepClone}),$newclone.find("input, textarea, select").each(function(){c.valueClone||e(this).val(""),l.triggerHandler("clone_form_input",[e(this),$toclone,$newclone])}),l.triggerHandler("clone_after_clone",[$toclone,$newclone]),l.triggerHandler("clone_before_append",[$toclone,$newclone]),"after"!=c.clonePosition?$toclone.before($newclone):$toclone.after($newclone),r(),l.triggerHandler("clone_after_append",[$toclone,$newclone])):l.triggerHandler("clone_limit",c.limit,[$toclone])}),l.find(c.cloneButton).length&&l.on("click",c.deleteButton,function(n){n.preventDefault(),l.triggerHandler("clone_delete",[e(this)])}),l.on("clone_delete",function(n,t){var o=l.find(c.cloneThis).length;o>1&&($todelete=t.closest(c.cloneThis),e.when(l.triggerHandler("clone_before_delete",[$todelete])).done(function(){l.triggerHandler("clone_after_delete")}))}),l.on("clone_before_delete",function(n,t){e(t).remove()});var r=function(){c.serializeID===!0&&(mainid=l.find(c.cloneThis).first().attr("id"),l.find(c.cloneThis).each(function(n){j=0!==n?n:"",e(this).attr("id")&&e(this).attr("id",mainid+j),e(this).find("*").each(function(){var n=e(this).attr("id");if(n){var t=n.match(o);t&&3===t.length?e(this).attr("id",t[1]+j):e(this).attr("id",n+j)}})}))}};e.fn.cloneya=function(t){return this.each(function(){var o=e(this);if(!o.data("cloneya")){var l=new n(this,t);o.data("cloneya",l)}})}}(jQuery);
