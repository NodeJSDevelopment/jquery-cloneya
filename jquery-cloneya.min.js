(function(a){var b=function(e,d){var g=/^(.*)(\d)+$/i;var f=a(e);var h={limit:999,cloneThis:".toclone",valueClone:false,dataClone:false,deepClone:false,cloneButton:".clone",deleteButton:".delete",clonePosition:"after",};var c=a.extend(h,d||{});this.getOption=function(){return c};this.setOption=function(k){a.extend(c,k||{})};if(f.find(c.cloneButton).length){f.on("click",c.cloneButton,function(k){k.preventDefault();f.trigger("clone_clone",[a(this)])})}f.on("clone_clone",function(l,m){var k=f.find(c.cloneThis).length;if(k<c.limit){$toclone=m.closest(c.cloneThis);f.trigger("clone_before_clone",$toclone);$newclone=$toclone.clone({withDataAndEvents:c.dataClone,deepWithDataAndEvents:c.deepClone});$newclone.find("input, textarea, select").each(function(){if(!c.valueClone){a(this).val("")}f.trigger("clone_form_input",m,$toclone,$newclone)});f.trigger("clone_after_clone",$toclone,$newclone);f.trigger("clone_before_append",$newclone);if(c.clonePosition!="after"){$toclone.before($newclone)}else{$toclone.after($newclone)}i();f.trigger("clone_after_append",$newclone)}else{f.trigger("clone_limit",c.limit,$toclone)}});if(f.find(c.cloneButton).length){f.on("click",c.deleteButton,function(k){k.preventDefault();f.trigger("clone_delete",[a(this)])})}f.on("clone_delete",function(l,m){var k=f.find(c.cloneThis).length;if(k>1){$todelete=m.closest(c.cloneThis);f.trigger("clone_before_delete",$todelete);$todelete.remove();f.trigger("clone_after_delete")}});var i=function(){if(c.serializeID!==true){return}mainid=f.find(c.cloneThis).first().attr("id");a(c.cloneThis).each(function(k){if(k!==0){j=k}else{j=""}if(a(this).attr("id")){a(this).attr("id",mainid+j)}a(this).find("*").each(function(){var m=a(this).attr("id");if(m){var l=m.match(g);if(l&&l.length===3){a(this).attr("id",l[1]+j)}else{a(this).attr("id",m+j)}}})})}};a.fn.cloneya=function(c){return this.each(function(){var d=a(this);if(d.data("cloneya")){return}var e=new b(this,c);d.data("cloneya",e)})}})(jQuery);