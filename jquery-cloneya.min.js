<<<<<<< HEAD
!function(e){var n=function(n,t){var o=/^(.*)(\d)+$/i,l=e(n),i={limit:999,cloneThis:".toclone",valueClone:!1,dataClone:!1,deepClone:!1,cloneButton:".clone",deleteButton:".delete",clonePosition:"after",serializeID:!0},c=e.extend(i,t||{});this.getOption=function(){return c},this.setOption=function(n){e.extend(c,n||{})},l.find(c.cloneButton).length&&l.on("click",c.cloneButton,function(n){n.preventDefault(),l.triggerHandler("clone_clone",[e(this)])}),l.on("clone_clone",function(n,t){var o=l.find(c.cloneThis).length;o<c.limit?($toclone=t.closest(c.cloneThis),l.triggerHandler("clone_before_clone",[$toclone]),$newclone=$toclone.clone({withDataAndEvents:c.dataClone,deepWithDataAndEvents:c.deepClone}),$newclone.find("input, textarea, select").each(function(){c.valueClone||e(this).val(""),l.triggerHandler("clone_form_input",[e(this),$toclone,$newclone])}),l.triggerHandler("clone_after_clone",[$toclone,$newclone]),l.triggerHandler("clone_before_append",[$toclone,$newclone]),"after"!=c.clonePosition?$toclone.before($newclone):$toclone.after($newclone),r(),l.triggerHandler("clone_after_append",[$toclone,$newclone])):l.triggerHandler("clone_limit",c.limit,[$toclone])}),l.find(c.cloneButton).length&&l.on("click",c.deleteButton,function(n){n.preventDefault(),l.triggerHandler("clone_delete",[e(this)])}),l.on("clone_delete",function(n,t){var o=l.find(c.cloneThis).length;o>1&&($todelete=t.closest(c.cloneThis),e.when(l.triggerHandler("clone_before_delete",[$todelete])).done(function(){l.triggerHandler("clone_after_delete")}))}),l.on("clone_before_delete",function(n,t){e(t).remove()});var r=function(){c.serializeID===!0&&(mainid=l.find(c.cloneThis).first().attr("id"),l.find(c.cloneThis).each(function(n){j=0!==n?n:"",e(this).attr("id")&&e(this).attr("id",mainid+j),e(this).find("*").each(function(){var n=e(this).attr("id");if(n){var t=n.match(o);t&&3===t.length?e(this).attr("id",t[1]+j):e(this).attr("id",n+j)}})}))}};e.fn.cloneya=function(t){return this.each(function(){var o=e(this);if(!o.data("cloneya")){var l=new n(this,t);o.data("cloneya",l)}})}}(jQuery);
=======
(function(e){var t=function(t,n){var r=/^(.*)(\d)+$/i;var i=e(t);var s={limit:999,cloneThis:".toclone",valueClone:false,dataClone:false,deepClone:false,cloneButton:".clone",deleteButton:".delete",clonePosition:"after"};var o=e.extend(s,n||{});this.getOption=function(){return o};this.setOption=function(t){e.extend(o,t||{})};var u=i.find(o.cloneThis).length;if(u<=2){e(o.deleteButton).eq(0).hide()}i.on("click",o.cloneButton,function(t){t.preventDefault();i.trigger("clone",[e(this)])});i.on("clone",function(t,n){var r=i.find(o.cloneThis).length;if(r<o.limit){$toclone=n.closest(o.cloneThis);i.trigger("clone_before_clone",$toclone);$newclone=$toclone.clone({withDataAndEvents:o.dataClone,deepWithDataAndEvents:o.deepClone});$newclone.find("input, textarea, select").each(function(){if(!o.valueClone){e(this).val("")}i.trigger("clone_form_input",n,$toclone,$newclone)});i.trigger("clone_after_clone",$toclone,$newclone);i.trigger("clone_before_append",$newclone);if(o.clonePosition!="after"){$toclone.before($newclone)}else{$toclone.after($newclone)}a();i.trigger("clone_after_append",$newclone)}else{i.trigger("clone_limit",o.limit,$toclone)}if(r>=1){e(o.deleteButton).show()}if(r>=o.limit-1){e(o.cloneButton).eq(r).hide()}});i.on("click",o.deleteButton,function(t){t.preventDefault();i.trigger("clone_delete",[e(this)])});i.on("clone_delete",function(t,n){var r=i.find(o.cloneThis).length;if(r>1){$todelete=n.closest(o.cloneThis);i.trigger("clone_before_delete",$todelete);$todelete.remove();i.trigger("clone_after_delete")}if(r<=2){e(o.deleteButton).eq(0).hide()}if(r<=o.limit){e(o.cloneButton).show()}});var a=function(){if(o.serializeID!==true){return}mainid=i.find(o.cloneThis).first().attr("id");e(o.cloneThis).each(function(t){if(t!==0){j=t}else{j=""}if(e(this).attr("id")){e(this).attr("id",mainid+j)}e(this).find("*").each(function(){var t=e(this).attr("id");if(t){var n=t.match(r);if(n&&n.length===3){e(this).attr("id",n[1]+j)}else{e(this).attr("id",t+j)}}})})}};e.fn.cloneya=function(n){return this.each(function(){var r=e(this);if(r.data("cloneya"))return;var i=new t(this,n);r.data("cloneya",i)})}})(jQuery)
>>>>>>> handle clone delete buttons on minfile
